{{ define "main" }}
<h2 class="title title-1">Discover the best tools for developers</h2>
<p class="description">A free weekly email digest of the best tools and beta releases for developers.</p>
<form action="https://dev.us7.list-manage.com/subscribe/post?u=f8c3cd14ee8d63c53d0986a48&amp;id=267911a165" method="post" id="console-subscribe" name="console-subscribe" class="console-form">
    <input id="form-email" name="EMAIL" class="console-input-text" type="email" placeholder="Your email" title="Email" required />
    <input type="hidden" value="/" name="REFERRER" id="mc-referrer" />
    <div style="position: absolute; left: -5000px" aria-hidden="true"><input type="text" name="b_f8c3cd14ee8d63c53d0986a48_267911a165" tabindex="-1" value="" /><!-- Anti spam field --></div>

    <button onclick="blur()" class="console-button icon-left" type="submit" title="Signup">
        {{ partial "icons/send.html" }}
        <span>Sign Up</span>
    </button>
</form>

{{ `<!-- Plausible Analytics goal tracking for signups -->` | safeHTML }}
<script>
    var registerForm = document.querySelector("#console-subscribe");
    registerForm.addEventListener("submit", function (e) {
        e.preventDefault();
        setTimeout(submitForm, 1000);
        var formSubmitted = false;

        function submitForm() {
            if (!formSubmitted) {
                formSubmitted = true;
                registerForm.submit();
            }
        }

        plausible("Newsletter Subscribe", {
            callback: submitForm,
        });
    });
</script>
<p>
    Every Thursday.
    <a class="link" onclick="blur()" href="/latest/">See the latest email</a>.
</p>
<div class="framed-section mid framed-section-overlay podcast-embed">
    <h5 class="title title-4">Console DevTools Podcast</h5>
    <div class="podcast-embed-content">
        <div data-console-player-wrapper class="console-player">
            <audio data-console-player-audio style="display: none;" preload="none" src="{{ $.Site.Params.consolePodcastURL}}"></audio>
            <div class="console-player-top">
                <button data-play onclick="blur();" class="console-button-text play" aria-label="Play">{{ partial "icons/play.html" }}</button>
                <button data-pause onclick="blur();" class="console-button-text pause" aria-label="Pause">{{ partial "icons/pause.html" }}</button>
                <h6 class="title title-5" title="{{ $.Site.Params.consolePodcastTitle }}">{{ $.Site.Params.consolePodcastTitle }}</h5>
            </div>
            <div data-progress class="progress"><span class="bg"></span><span data-elapsed class="elapsed" style="width: 0%"></span></div>
        </div>
        {{ partial "components/podcast-links.html" (dict "apple" "true" "spotify" "true") }}
    </div>
</div>
<!--<div class="framed-section mid framed-section-overlay">
    <p>
        <span class="badge inline">New</span>&nbsp;&nbsp;Read our latest review of the <a class="link" onclick="blur()" href="/code-collaboration-pair-programming/">best code collaboration and pair programming tools for developers</a>.
    </p>
</div>-->

{{ $audioPlayerJS := resources.Get "/js/audio-player.js" }}
{{ if hugo.IsProduction }}{{ $audioPlayerJS = $audioPlayerJS | resources.Minify | resources.Fingerprint }}{{ end }}
<script src="{{ $audioPlayerJS.Permalink }}"></script>

{{ end }}
