<head>
    <title>{{ .Title }}</title>
    <meta charset="utf-8" />
    {{ if not .Params.metaDescription -}}
    <meta name="description" content="{{ .Summary }}" />
    {{- else -}}
    <meta name="description" content="{{ .Params.metaDescription }}" />
    {{- end }}

    <link rel="stylesheet" href="/css/normalize.css" />
    <link rel="preload" href="/fonts/rubik-v12-latin-regular.woff2" as="font" crossorigin="anonymous">
    <link rel="preload" href="/fonts/rubik-v12-latin-italic.woff2" as="font" crossorigin="anonymous">
    <link rel="preload" href="/fonts/rubik-v12-latin-300.woff2" as="font" crossorigin="anonymous">
    <link rel="preload" href="/fonts/rubik-v12-latin-300italic.woff2" as="font" crossorigin="anonymous">
    <link rel="preload" href="/fonts/rubik-v12-latin-500.woff2" as="font" crossorigin="anonymous">
    <link rel="preload" href="/fonts/rubik-v12-latin-500italic.woff2" as="font" crossorigin="anonymous">
    <link rel="stylesheet" href="/css/fonts.css" />
    <link rel="stylesheet" href="/css/vars.css" />
    <link rel="preload" href="/css/style-dark.css" as="style" />
    <link rel="preload" href="/css/style-light.css" as="style" />
    <script src="/js/head-scripts.js"></script>
    <link rel="stylesheet" href="/css/styles.css" />
    <link rel="stylesheet" href="/css/components.css" />
    {{ if and .Params.pageType .Params.customPageStyle }}<link rel="stylesheet" href="/css/page-type/{{ .Params.pageType }}.css" />{{ end }}
    {{ if and .Params.isPage .Params.customStyle }}<link rel="stylesheet" href="/css/page/{{ .Params.isPage }}{{ with .Params.isSubpage }}/{{ . }}{{ end }}.css" />{{ end }}

    <link rel="icon" href="/favicon.svg" type="image/svg+xml" />
    <link rel="icon" href="/favicon.png" type="image/png" />

    <link rel="canonical" href="{{ .Permalink }}" />
    <link rel="alternate" type="application/rss+xml" title="Beta Console - developer tool beta releases" href="https://console.dev/betas/rss.xml" />
    <link rel="alternate" type="application/rss+xml" title="Console DevTools Podcast" href="https://feeds.simplecast.com/T80CJwln" />
    <link rel="alternate" type="application/rss+xml" title="Console - Blog" href="https://blog.console.dev/rss/" />
    <link rel="alternate" type="application/rss+xml" title="Console - Developer Interviews" href="https://console.dev/interviews/rss.xml" />
    <link rel="alternate" type="application/rss+xml" title="Console - Articles" href="https://console.dev/articles/rss.xml" />
    <link rel="alternate" type="application/rss+xml" title="Console - Tools" href="https://console.dev/tools/rss.xml" />

    {{ $iso8601 := "2006-01-02T15:04:05-07:00" -}}
    <meta name="viewport" content="width=device-width, user-scalable=no" />
    <!-- Hey Browser, 
     this website support `dark` and `light`
     but the author prefers `dark` representation 
     https://www.stefanjudis.com/today-i-learned/how-to-tell-browsers-that-your-site-supports-color-schemes/
    -->
    <meta name="color-scheme" content="dark light">

    {{ if not .PublishDate.IsZero -}}
    <meta property="article:published_time" {{ .PublishDate.Format $iso8601 | printf "content=%q" | safeHTMLAttr }}>
    {{ else if not .Date.IsZero -}}
    <meta property="article:published_time" {{ .Date.Format $iso8601 | printf "content=%q" | safeHTMLAttr }}>
    {{ end -}}
    <!--
        Set the $lastmod value based on the data files

        ARE YOU UPDATING THIS BLOCK? DONT FORGET layouts/sitemap.xml

        If this is /latest/ 
        The modified_time needs to match the date of the latest newsletter.
    -->
    {{- $lastmod := false -}}
    {{- if eq $.Page.RelPermalink "/latest/" -}}
        {{- if $.Site.Data.toolslatest.items -}}
            {{- range first 1 $.Site.Data.toolslatest.items -}}
                {{- $lastmod = index . "Scheduled for" -}}
                {{- $lastmod = dateFormat $iso8601 $lastmod -}}
            {{- end -}}
        {{- end -}}
    <!--
        If this is /tools/
        Pull out the "Scheduled for" timestamp from the latest item
    -->
    {{- else if eq $.Page.RelPermalink "/tools/" -}}
        {{- range first 1 $.Site.Data.toolslatest.items -}}
            {{- $lastmod = index . "Scheduled for" -}}
            {{- $lastmod = dateFormat $iso8601 $lastmod -}}
        {{- end -}}
    {{- else if eq $.Page.RelPermalink "/betas/" -}}
    <!--
        If this is /betas/
        Pull out the "last checked" timestamp from the first live beta and
        GA beta. Compare the times, and pick the latest time as the "last
        updated" timestamp.
    -->
        {{- $liveChecked := false -}}
        {{- $gaChecked := false -}}
        {{- range first 1 $.Site.Data.betaslive.items -}}{{- $liveChecked = time (index . "Last checked") -}}{{- end -}}
        {{- range first 1 $.Site.Data.betasga.items -}}{{- $gaChecked = time (index . "Last checked") -}}{{- end -}}
        {{- $updated := "" -}}
        {{- if $gaChecked.After $liveChecked -}}{{- $lastmod = $gaChecked.Format $iso8601 -}}{{- else -}}{{- $lastmod = $liveChecked.Format $iso8601 -}}{{- end -}}
    <!--
        If this is /interviews/
        Use the date of the latest interview
    -->
    {{- else if eq .RelPermalink "/interviews/" -}}
        {{ range last 1 (where .Site.RegularPages.ByDate "Section" "interviews" ) }}
            {{- $lastmod = .Date -}}
            {{- $lastmod = dateFormat $iso8601 $lastmod -}}
        {{- end -}}
    {{- else if not .Lastmod.IsZero -}}
    <!--
        Otherwise, every other page use the last mod attribute
    -->
        {{- $lastmod = .Lastmod.Format $iso8601 -}}
    {{- end  -}}
    {{ if $lastmod }}<meta property="article:modified_time" {{ $lastmod | printf "content=%q" | safeHTMLAttr }}>
    {{ end -}}
    <!-- https://developer.yoast.com/features/opengraph/functional-specification -->
    <meta property="og:site_name" content="Console" />
    <meta property="og:title" content="{{ .Title }}" />
    {{ if not .Params.metaDescription -}}
    <meta property="og:description" content="{{ .Summary }}" />
    {{- else -}}
    <meta property="og:description" content="{{ .Params.metaDescription }}" />
    {{- end }}
    {{- $ogImg := "/img/console-mark-256.png" -}}
    {{- if .Params.ogImg }}
    {{- $ogImg = .Params.ogImg -}}
    {{- end }}
    <meta property="og:image" content="https://console.dev{{ $ogImg }}" />
    <meta property="og:image:secure_url" content="https://console.dev{{ $ogImg }}" />
    {{- $ogType := "article" -}}
    {{- if .Params.ogType }}
    {{- $ogType = .Params.ogType -}}
    {{- end }}
    <meta property="og:type" content="{{ $ogType }}" />
    <meta property="og:url" content="{{ .Permalink }}" />
    <meta name="twitter:site" content="@consoledotdev" />
    {{ range .Params.tags }}
    <meta property="article:section" content="{{ . }}">{{ end }}
    {{ if .Params.robotsDisallow }}
    <meta name="robots" content="noindex,follow,noarchive">
    {{end -}}

    {{ `<!-- Plausible Analytics: https://blog.console.dev/picking-privacy-first-analytics/ -->` | safeHTML }}
    <script defer data-domain="console.dev" src="https://plausible.io/js/plausible.outbound-links.js"></script>
    <script>
        window.plausible =
            window.plausible ||
            function () {
                (window.plausible.q = window.plausible.q || []).push(arguments);
            };
    </script>
    <!-- Include Ad tracking only for visitors from Reddit - first party cookies disabled -->
    {{- if (or (eq $.Page.RelPermalink "/reddit/") (eq $.Page.RelPermalink "/landing/reddit/1/") (eq $.Page.RelPermalink "/landing/reddit/2/") (eq $.Page.RelPermalink "/landing/reddit/3/")) -}}
    <!-- Reddit Pixel -->
    <script>
    !function(w,d){if(!w.rdt){var p=w.rdt=function(){p.sendEvent?p.sendEvent.apply(p,arguments):p.callQueue.push(arguments)};p.callQueue=[];var t=d.createElement("script");t.src="https://www.redditstatic.com/ads/pixel.js",t.async=!0;var s=d.getElementsByTagName("script")[0];s.parentNode.insertBefore(t,s)}}(window,document);rdt('init','t2_919zho3h');rdt('disableFirstPartyCookies');rdt('track', 'PageVisit');
    </script>
    <!-- End Reddit Pixel -->
    {{- end -}}
</head>
